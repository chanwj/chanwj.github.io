var searchFunc=function(path,search_id,content_id){$.ajax({url:path,dataType:'xml',success:function(xmlResponse){var $resultContent,searchCount,initSearchCount,searchEmpty,datas=$('entry',xmlResponse).map(function(){return{title:$('title',this).text(),content:$('content',this).text(),url:$('url',this).text()}}).get(),xmlResponse=document.getElementById(search_id);xmlResponse&&($resultContent=document.getElementById(content_id),searchCount=document.getElementById('search-count'),initSearchCount=searchCount.innerText,searchEmpty=document.getElementById('search-result-empty'),0<$('#search-input').length)&&xmlResponse.addEventListener('input',function(){var str,keywords,matchCount;$resultContent.innerHTML='',this.value.trim().length<=0?searchCount.removeAttribute('search-count-show'):(str='<ul class="search-result-list">',keywords=this.value.trim().toLowerCase().split(/[\s\-]+/),matchCount=0,datas.forEach(function(data){var index_title,start,match_content,isMatch=!0,data_title=(data.title&&''!==data.title.trim()||(data.title='Untitled'),data.title.trim().toLowerCase()),data_content=data.content.trim().replace(/<[^>]+>/g,'').toLowerCase(),data_url=data.url,index_content=-1,first_occur=-1;''!==data_content?keywords.forEach(function(keyword,i){index_title=data_title.indexOf(keyword),index_content=data_content.indexOf(keyword),index_title<0&&index_content<0?isMatch=!1:(index_content<0&&(index_content=0),0==i&&(first_occur=index_content))}):isMatch=!1,isMatch&&(matchCount++,str+='<li><a href=\''+data_url+'\' class=\'search-result-title\'>'+data_title+'</a>',data_url=data.content.trim().replace(/<[^>]+>/g,''),0<=first_occur&&(data=first_occur+80,(data=0==(start=(start=first_occur-20)<0?0:start)?100:data)>data_url.length&&(data=data_url.length),match_content=data_url.substring(start,data),keywords.forEach(function(keyword){var regS=new RegExp(keyword,'gi');match_content=match_content.replace(regS,'<em class="search-keyword">'+keyword+'</em>')}),str+='<p class="search-result-content">'+match_content+'...</p>'),str+='</li>')}),str+='</ul>',matchCount<=0?($resultContent.innerHTML='',searchCount.removeAttribute('search-count-show'),searchEmpty.setAttribute('search-empty-show',!0)):($resultContent.innerHTML=str,searchCount.setAttribute('search-count-show',!0),searchCount.innerText=initSearchCount+matchCount,searchEmpty.removeAttribute('search-empty-show')))})}})};function toggleSearchWindow(){var searchPanel=document.getElementById('search-panel');searchPanel.getAttribute('search-show')?searchPanel.removeAttribute('search-show'):searchPanel.setAttribute('search-show',!0)}